name: Aliyun Signin

on:
  schedule:
    - cron: '33 14 * * 0,2,4,6'
    - cron: '19 13 * * 1,3,5'
  workflow_dispatch:
jobs:
  signin:
    name: Aliyun Signin
    runs-on: ubuntu-latest
    steps:
      - name: Set delay to env
        run: echo "DELAY_TIME=$[ ( $RANDOM % 10 )  ]m" >> $GITHUB_ENV
      - name: Delay for random amount of minutes - Delay ${{ env.DELAY_TIME }}
        run: sleep ${{ env.DELAY_TIME }}
      - uses: ImYrS/aliyun-auto-signin@main
        with:
          REFRESH_TOKENS: ${{ secrets.REFRESH_TOKENS }}
          GP_TOKEN: ${{ secrets.ALIYUN_GITHUB_TOKEN }}
          PUSH_TYPES: ${{ secrets.ALIYUN_PUSH_TYPE }}
          FEISHU_WEBHOOK: ${{ secrets.FEISHU_WEBHOOK }}
          DO_NOT_REWARD: 'true'
